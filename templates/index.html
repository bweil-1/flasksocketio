<!DOCTYPE html>
<html>
<head>
    <title>Flask Chat App</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body class="bg-dark text-light">
<div class="container my-4">
    <h2>ðŸ’¬ Flask Chat App with Nicknames</h2>
    
    <div class="form-group">
        <label>Enter your nickname:</label>
        <input type="text" id="nickname" class="form-control" placeholder="e.g., Lovnish" required>
    </div>

    <ul id="messages" class="list-group my-3">
        {% for msg in messages %}
            <li class="list-group-item bg-secondary text-white">
                <strong>{{ msg.nickname }}</strong>: {{ msg.message }} 
                <span class="float-end text-light small">{{ msg.timestamp }}</span>
            </li>
        {% endfor %}
    </ul>

    <input id="message" autocomplete="off" class="form-control" placeholder="Type your message">
    <button id="send" class="btn btn-primary mt-2">Send</button>
</div>

<script>
    const socket = io();

    $('#send').click(function () {
        const nickname = $('#nickname').val().trim();
        const message = $('#message').val().trim();

        if (nickname && message) {
            socket.send({nickname: nickname, message: message});
            $('#message').val('');
        }
    });

    socket.on('message', function (msg) {
        $('#messages').append(
            `<li class="list-group-item bg-secondary text-white">
                <strong>${msg.nickname}</strong>: ${msg.message}
                <span class="float-end text-light small">${msg.timestamp}</span>
             </li>`
        );
    });
</script>
</body>
</html>
